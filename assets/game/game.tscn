[gd_scene load_steps=27 format=3 uid="uid://b6tgxpl2npofy"]

[ext_resource type="Script" path="res://assets/game/game.gd" id="1_dld7d"]
[ext_resource type="PackedScene" uid="uid://dudaruvg7dj6t" path="res://assets/player/player.tscn" id="2_7ojib"]
[ext_resource type="Resource" uid="uid://csj351olot7xt" path="res://assets/dialogs/resources/intro.tres" id="2_eq7oa"]
[ext_resource type="PackedScene" uid="uid://bqk4vvc80kfd6" path="res://assets/ship/ship.tscn" id="2_nhekc"]
[ext_resource type="PackedScene" uid="uid://cfmao6x2oota4" path="res://assets/menu/main/main_menu.tscn" id="3_vj133"]
[ext_resource type="AudioStream" uid="uid://cjnjvkssq5f8q" path="res://assets/soundtrack/placeholder.mp3" id="5_qgk2g"]
[ext_resource type="PackedScene" uid="uid://col11m3s73iqx" path="res://assets/flying_dutchman/flying_dutchman.tscn" id="6_5h4fs"]
[ext_resource type="Script" path="res://assets/dialogs/speecher.gd" id="7_3ovya"]
[ext_resource type="Material" uid="uid://d4e361pjonbxd" path="res://assets/flying_dutchman/vortex_material.tres" id="7_p2fpc"]
[ext_resource type="Material" uid="uid://b6hapbsjjnon" path="res://assets/flying_dutchman/sea_material.tres" id="11_lo82i"]
[ext_resource type="PackedScene" uid="uid://7pq0gedjd1os" path="res://assets/stuff/water.glb" id="11_ttfla"]

[sub_resource type="Animation" id="Animation_wf7q6"]
resource_name = "Begin"
length = 10.4025
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.3),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"intro"
}]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Level/Player:process_mode")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 10.2),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [4, 0]
}

[sub_resource type="Animation" id="Animation_p2vob"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Level/Player:process_mode")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_r0wkq"]
_data = {
"Begin": SubResource("Animation_wf7q6"),
"RESET": SubResource("Animation_p2vob")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_h0pg8"]
animation = &"Begin"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ku08u"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_54s0t"]
states/Begin/node = SubResource("AnimationNodeAnimation_h0pg8")
states/Begin/position = Vector2(379.333, 100.444)
transitions = ["Start", "Begin", SubResource("AnimationNodeStateMachineTransition_ku08u")]

[sub_resource type="AudioStreamPlaylist" id="AudioStreamPlaylist_roke2"]
stream_count = 1
stream_0 = ExtResource("5_qgk2g")

[sub_resource type="Environment" id="Environment_qu8ju"]
background_mode = 1
background_color = Color(0.0156863, 0.0901961, 0.121569, 1)
background_energy_multiplier = 0.59
ambient_light_source = 2
ambient_light_color = Color(0.275037, 0.482292, 0.575521, 1)
ambient_light_energy = 0.24
glow_intensity = 8.0
glow_hdr_threshold = 0.33
fog_light_color = Color(0.2196, 0.607839, 0.68781, 1)
fog_light_energy = 0.1
fog_density = 0.0416
adjustment_brightness = 1.28
adjustment_contrast = 1.2
adjustment_saturation = 1.35

[sub_resource type="CylinderMesh" id="CylinderMesh_miw7b"]
flip_faces = true
top_radius = 400.0
bottom_radius = 100.0
height = 500.0
radial_segments = 128
rings = 32
cap_top = false
cap_bottom = false

[sub_resource type="Animation" id="Animation_j3poc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0.243631, 0)]
}

[sub_resource type="Animation" id="Animation_ib0f5"]
resource_name = "rotate"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 3.14159, 0), Vector3(0, 6.28319, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_i5nsu"]
_data = {
"RESET": SubResource("Animation_j3poc"),
"rotate": SubResource("Animation_ib0f5")
}

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_arvyi"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uhkxg"]
animation = &"rotate"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_547mm"]
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_arvyi")
nodes/TimeScale/position = Vector2(160, 100)
nodes/output/position = Vector2(340, 140)
nodes/rotate/node = SubResource("AnimationNodeAnimation_uhkxg")
nodes/rotate/position = Vector2(-20, 120)
node_connections = [&"TimeScale", 0, &"rotate", &"output", 0, &"TimeScale"]

[node name="Game" type="Node"]
script = ExtResource("1_dld7d")
intro_speech = ExtResource("2_eq7oa")

[node name="Level" type="Node3D" parent="."]
process_mode = 1

[node name="AnimationPlayer" type="AnimationPlayer" parent="Level"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_r0wkq")
}

[node name="AnimationTree" type="AnimationTree" parent="Level"]
active = false
root_node = NodePath("../..")
tree_root = SubResource("AnimationNodeStateMachine_54s0t")
anim_player = NodePath("../AnimationPlayer")

[node name="Ship" parent="Level" instance=ExtResource("2_nhekc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8.742, 0.026)

[node name="Player" parent="Level" instance=ExtResource("2_7ojib")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.17041, 6.34876, -14.025)

[node name="Storyteller" type="AudioStreamPlayer" parent="Level"]
script = ExtResource("7_3ovya")
author = &"Storyteller"

[node name="MainMenu" parent="." instance=ExtResource("3_vj133")]
process_mode = 3

[node name="Soundtrack" type="AudioStreamPlayer" parent="."]
process_mode = 3
stream = SubResource("AudioStreamPlaylist_roke2")
autoplay = true
bus = &"Music"

[node name="FlyingDutchman" parent="." instance=ExtResource("6_5h4fs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 45.176, -1.02945, 1.19075)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_qu8ju")

[node name="Vortex" type="CSGMesh3D" parent="."]
transform = Transform3D(0.970468, 0, 0.241228, 0, 1, 0, -0.241228, 0, 0.970468, -15.6826, 58.9896, 0)
mesh = SubResource("CylinderMesh_miw7b")
material = ExtResource("7_p2fpc")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Vortex"]
libraries = {
"": SubResource("AnimationLibrary_i5nsu")
}

[node name="AnimationTree" type="AnimationTree" parent="Vortex"]
tree_root = SubResource("AnimationNodeBlendTree_547mm")
anim_player = NodePath("../AnimationPlayer")
parameters/TimeScale/scale = 0.1

[node name="water" parent="." instance=ExtResource("11_ttfla")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.26399, 0)

[node name="Plane" parent="water" index="0"]
material_override = ExtResource("11_lo82i")

[editable path="water"]
